---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.11.1
  creationTimestamp: null
  name: playbooks.mission-control.flanksource.com
spec:
  group: mission-control.flanksource.com
  names:
    kind: Playbook
    listKind: PlaybookList
    plural: playbooks
    singular: playbook
  scope: Namespaced
  versions:
  - name: v1
    schema:
      openAPIV3Schema:
        description: Playbook is the schema for the Playbooks API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            properties:
              actions:
                description: List of actions that need to be executed by this playbook.
                items:
                  properties:
                    delay:
                      description: Delay is a CEL expression that returns the duration
                        to delay the execution of this action. Valid time units are
                        "s", "m", "h", "d", "w", "y". It's only sensitive to the minute.
                        i.e. if you delay by 20s it can take upto a minute to execute.
                      type: string
                    exec:
                      properties:
                        artifacts:
                          description: Artifacts to save
                          items:
                            properties:
                              path:
                                type: string
                            required:
                            - path
                            type: object
                          type: array
                        checkout:
                          description: Checkout details the git repository that should
                            be mounted to the process
                          properties:
                            certificate:
                              properties:
                                name:
                                  type: string
                                value:
                                  type: string
                                valueFrom:
                                  properties:
                                    configMapKeyRef:
                                      properties:
                                        key:
                                          type: string
                                        name:
                                          type: string
                                      required:
                                      - key
                                      type: object
                                    helmRef:
                                      properties:
                                        key:
                                          description: Key is a JSONPath expression
                                            used to fetch the key from the merged
                                            JSON.
                                          type: string
                                        name:
                                          type: string
                                      required:
                                      - key
                                      type: object
                                    secretKeyRef:
                                      properties:
                                        key:
                                          type: string
                                        name:
                                          type: string
                                      required:
                                      - key
                                      type: object
                                    serviceAccount:
                                      description: ServiceAccount specifies the service
                                        account whose token should be fetched
                                      type: string
                                  type: object
                              type: object
                            connection:
                              type: string
                            destination:
                              description: Destination is the full path to where the
                                contents of the URL should be downloaded to. If left
                                empty, the sha256 hash of the URL will be used as
                                the dir name.
                              type: string
                            password:
                              properties:
                                name:
                                  type: string
                                value:
                                  type: string
                                valueFrom:
                                  properties:
                                    configMapKeyRef:
                                      properties:
                                        key:
                                          type: string
                                        name:
                                          type: string
                                      required:
                                      - key
                                      type: object
                                    helmRef:
                                      properties:
                                        key:
                                          description: Key is a JSONPath expression
                                            used to fetch the key from the merged
                                            JSON.
                                          type: string
                                        name:
                                          type: string
                                      required:
                                      - key
                                      type: object
                                    secretKeyRef:
                                      properties:
                                        key:
                                          type: string
                                        name:
                                          type: string
                                      required:
                                      - key
                                      type: object
                                    serviceAccount:
                                      description: ServiceAccount specifies the service
                                        account whose token should be fetched
                                      type: string
                                  type: object
                              type: object
                            url:
                              type: string
                            username:
                              properties:
                                name:
                                  type: string
                                value:
                                  type: string
                                valueFrom:
                                  properties:
                                    configMapKeyRef:
                                      properties:
                                        key:
                                          type: string
                                        name:
                                          type: string
                                      required:
                                      - key
                                      type: object
                                    helmRef:
                                      properties:
                                        key:
                                          description: Key is a JSONPath expression
                                            used to fetch the key from the merged
                                            JSON.
                                          type: string
                                        name:
                                          type: string
                                      required:
                                      - key
                                      type: object
                                    secretKeyRef:
                                      properties:
                                        key:
                                          type: string
                                        name:
                                          type: string
                                      required:
                                      - key
                                      type: object
                                    serviceAccount:
                                      description: ServiceAccount specifies the service
                                        account whose token should be fetched
                                      type: string
                                  type: object
                              type: object
                          type: object
                        connections:
                          properties:
                            aws:
                              properties:
                                accessKey:
                                  properties:
                                    name:
                                      type: string
                                    value:
                                      type: string
                                    valueFrom:
                                      properties:
                                        configMapKeyRef:
                                          properties:
                                            key:
                                              type: string
                                            name:
                                              type: string
                                          required:
                                          - key
                                          type: object
                                        helmRef:
                                          properties:
                                            key:
                                              description: Key is a JSONPath expression
                                                used to fetch the key from the merged
                                                JSON.
                                              type: string
                                            name:
                                              type: string
                                          required:
                                          - key
                                          type: object
                                        secretKeyRef:
                                          properties:
                                            key:
                                              type: string
                                            name:
                                              type: string
                                          required:
                                          - key
                                          type: object
                                        serviceAccount:
                                          description: ServiceAccount specifies the
                                            service account whose token should be
                                            fetched
                                          type: string
                                      type: object
                                  type: object
                                connection:
                                  description: ConnectionName of the connection. It'll
                                    be used to populate the endpoint, accessKey and
                                    secretKey.
                                  type: string
                                endpoint:
                                  type: string
                                objectPath:
                                  description: glob path to restrict matches to a
                                    subset
                                  type: string
                                region:
                                  type: string
                                secretKey:
                                  properties:
                                    name:
                                      type: string
                                    value:
                                      type: string
                                    valueFrom:
                                      properties:
                                        configMapKeyRef:
                                          properties:
                                            key:
                                              type: string
                                            name:
                                              type: string
                                          required:
                                          - key
                                          type: object
                                        helmRef:
                                          properties:
                                            key:
                                              description: Key is a JSONPath expression
                                                used to fetch the key from the merged
                                                JSON.
                                              type: string
                                            name:
                                              type: string
                                          required:
                                          - key
                                          type: object
                                        secretKeyRef:
                                          properties:
                                            key:
                                              type: string
                                            name:
                                              type: string
                                          required:
                                          - key
                                          type: object
                                        serviceAccount:
                                          description: ServiceAccount specifies the
                                            service account whose token should be
                                            fetched
                                          type: string
                                      type: object
                                  type: object
                                sessionToken:
                                  properties:
                                    name:
                                      type: string
                                    value:
                                      type: string
                                    valueFrom:
                                      properties:
                                        configMapKeyRef:
                                          properties:
                                            key:
                                              type: string
                                            name:
                                              type: string
                                          required:
                                          - key
                                          type: object
                                        helmRef:
                                          properties:
                                            key:
                                              description: Key is a JSONPath expression
                                                used to fetch the key from the merged
                                                JSON.
                                              type: string
                                            name:
                                              type: string
                                          required:
                                          - key
                                          type: object
                                        secretKeyRef:
                                          properties:
                                            key:
                                              type: string
                                            name:
                                              type: string
                                          required:
                                          - key
                                          type: object
                                        serviceAccount:
                                          description: ServiceAccount specifies the
                                            service account whose token should be
                                            fetched
                                          type: string
                                      type: object
                                  type: object
                                skipTLSVerify:
                                  description: Skip TLS verify when connecting to
                                    aws
                                  type: boolean
                                usePathStyle:
                                  description: 'Use path style path: http://s3.amazonaws.com/BUCKET/KEY
                                    instead of http://BUCKET.s3.amazonaws.com/KEY'
                                  type: boolean
                              type: object
                            azure:
                              properties:
                                clientID:
                                  properties:
                                    name:
                                      type: string
                                    value:
                                      type: string
                                    valueFrom:
                                      properties:
                                        configMapKeyRef:
                                          properties:
                                            key:
                                              type: string
                                            name:
                                              type: string
                                          required:
                                          - key
                                          type: object
                                        helmRef:
                                          properties:
                                            key:
                                              description: Key is a JSONPath expression
                                                used to fetch the key from the merged
                                                JSON.
                                              type: string
                                            name:
                                              type: string
                                          required:
                                          - key
                                          type: object
                                        secretKeyRef:
                                          properties:
                                            key:
                                              type: string
                                            name:
                                              type: string
                                          required:
                                          - key
                                          type: object
                                        serviceAccount:
                                          description: ServiceAccount specifies the
                                            service account whose token should be
                                            fetched
                                          type: string
                                      type: object
                                  type: object
                                clientSecret:
                                  properties:
                                    name:
                                      type: string
                                    value:
                                      type: string
                                    valueFrom:
                                      properties:
                                        configMapKeyRef:
                                          properties:
                                            key:
                                              type: string
                                            name:
                                              type: string
                                          required:
                                          - key
                                          type: object
                                        helmRef:
                                          properties:
                                            key:
                                              description: Key is a JSONPath expression
                                                used to fetch the key from the merged
                                                JSON.
                                              type: string
                                            name:
                                              type: string
                                          required:
                                          - key
                                          type: object
                                        secretKeyRef:
                                          properties:
                                            key:
                                              type: string
                                            name:
                                              type: string
                                          required:
                                          - key
                                          type: object
                                        serviceAccount:
                                          description: ServiceAccount specifies the
                                            service account whose token should be
                                            fetched
                                          type: string
                                      type: object
                                  type: object
                                connection:
                                  type: string
                                tenantID:
                                  type: string
                              type: object
                            gcp:
                              properties:
                                connection:
                                  description: ConnectionName of the connection. It'll
                                    be used to populate the endpoint and credentials.
                                  type: string
                                credentials:
                                  properties:
                                    name:
                                      type: string
                                    value:
                                      type: string
                                    valueFrom:
                                      properties:
                                        configMapKeyRef:
                                          properties:
                                            key:
                                              type: string
                                            name:
                                              type: string
                                          required:
                                          - key
                                          type: object
                                        helmRef:
                                          properties:
                                            key:
                                              description: Key is a JSONPath expression
                                                used to fetch the key from the merged
                                                JSON.
                                              type: string
                                            name:
                                              type: string
                                          required:
                                          - key
                                          type: object
                                        secretKeyRef:
                                          properties:
                                            key:
                                              type: string
                                            name:
                                              type: string
                                          required:
                                          - key
                                          type: object
                                        serviceAccount:
                                          description: ServiceAccount specifies the
                                            service account whose token should be
                                            fetched
                                          type: string
                                      type: object
                                  type: object
                                endpoint:
                                  type: string
                              type: object
                          type: object
                        env:
                          description: EnvVars are the environment variables that
                            are accessible to exec processes
                          items:
                            properties:
                              name:
                                type: string
                              value:
                                type: string
                              valueFrom:
                                properties:
                                  configMapKeyRef:
                                    properties:
                                      key:
                                        type: string
                                      name:
                                        type: string
                                    required:
                                    - key
                                    type: object
                                  helmRef:
                                    properties:
                                      key:
                                        description: Key is a JSONPath expression
                                          used to fetch the key from the merged JSON.
                                        type: string
                                      name:
                                        type: string
                                    required:
                                    - key
                                    type: object
                                  secretKeyRef:
                                    properties:
                                      key:
                                        type: string
                                      name:
                                        type: string
                                    required:
                                    - key
                                    type: object
                                  serviceAccount:
                                    description: ServiceAccount specifies the service
                                      account whose token should be fetched
                                    type: string
                                type: object
                            type: object
                          type: array
                        script:
                          description: Script can be an inline script or a path to
                            a script that needs to be executed On windows executed
                            via powershell and in darwin and linux executed using
                            bash
                          type: string
                      required:
                      - script
                      type: object
                    github:
                      properties:
                        repo:
                          description: Repo is the name of the repository without
                            the .git extension
                          type: string
                        token:
                          description: Token is the personal access token
                          properties:
                            name:
                              type: string
                            value:
                              type: string
                            valueFrom:
                              properties:
                                configMapKeyRef:
                                  properties:
                                    key:
                                      type: string
                                    name:
                                      type: string
                                  required:
                                  - key
                                  type: object
                                helmRef:
                                  properties:
                                    key:
                                      description: Key is a JSONPath expression used
                                        to fetch the key from the merged JSON.
                                      type: string
                                    name:
                                      type: string
                                  required:
                                  - key
                                  type: object
                                secretKeyRef:
                                  properties:
                                    key:
                                      type: string
                                    name:
                                      type: string
                                  required:
                                  - key
                                  type: object
                                serviceAccount:
                                  description: ServiceAccount specifies the service
                                    account whose token should be fetched
                                  type: string
                              type: object
                          type: object
                        username:
                          description: Username is the account owner of the repository.
                            The name is not case sensitive
                          type: string
                        workflows:
                          description: Workflows is the list of github workflows to
                            invoke
                          items:
                            properties:
                              id:
                                description: 'Id is the workflow id or the workflow
                                  file name (eg: main.yaml)'
                                type: string
                              input:
                                description: Input is the optional input keys and
                                  values, in JSON format, configured in the workflow
                                  file.
                                type: string
                              ref:
                                description: Ref is the git reference for the workflow.
                                  The reference can be a branch or tag name. Defaults
                                  to "main".
                                type: string
                            required:
                            - id
                            type: object
                          type: array
                      required:
                      - repo
                      - token
                      - username
                      type: object
                    gitops:
                      properties:
                        commit:
                          properties:
                            author:
                              type: string
                            email:
                              type: string
                            message:
                              type: string
                          required:
                          - author
                          - email
                          - message
                          type: object
                        files:
                          description: Files to create/delete. Use the special "$delete"
                            directive to delete an existing file.
                          items:
                            properties:
                              content:
                                type: string
                              path:
                                type: string
                            required:
                            - content
                            - path
                            type: object
                          type: array
                        patches:
                          items:
                            properties:
                              jq:
                                type: string
                              path:
                                type: string
                              yq:
                                type: string
                            required:
                            - path
                            type: object
                          type: array
                        pr:
                          description: PullRequest specifies the details for the PR
                            to be created. Only if connection type is github or azuredevops
                            then a new PR is created.
                          properties:
                            tags:
                              description: Tags to add to the PR
                              items:
                                type: string
                              type: array
                            title:
                              description: Title of the Pull request
                              type: string
                          required:
                          - title
                          type: object
                        repo:
                          properties:
                            base:
                              description: Branch to clone. Defaults to "main".
                              type: string
                            branch:
                              description: Branch is the new branch to create. Defaults
                                to Base.
                              type: string
                            connection:
                              description: Connection name to use the credentials
                                for the git repo
                              type: string
                            url:
                              description: URL of the git repository
                              type: string
                          required:
                          - url
                          type: object
                      required:
                      - commit
                      - repo
                      type: object
                    http:
                      properties:
                        body:
                          description: Request Body Contents
                          type: string
                        connection:
                          description: Connection name e.g. connection://http/google
                          type: string
                        headers:
                          description: Header fields to be used in the query
                          items:
                            properties:
                              name:
                                type: string
                              value:
                                type: string
                              valueFrom:
                                properties:
                                  configMapKeyRef:
                                    properties:
                                      key:
                                        type: string
                                      name:
                                        type: string
                                    required:
                                    - key
                                    type: object
                                  helmRef:
                                    properties:
                                      key:
                                        description: Key is a JSONPath expression
                                          used to fetch the key from the merged JSON.
                                        type: string
                                      name:
                                        type: string
                                    required:
                                    - key
                                    type: object
                                  secretKeyRef:
                                    properties:
                                      key:
                                        type: string
                                      name:
                                        type: string
                                    required:
                                    - key
                                    type: object
                                  serviceAccount:
                                    description: ServiceAccount specifies the service
                                      account whose token should be fetched
                                    type: string
                                type: object
                            type: object
                          type: array
                        method:
                          description: Method to use - defaults to GET
                          type: string
                        ntlm:
                          description: NTLM when set to true will do authentication
                            using NTLM v1 protocol
                          type: boolean
                        ntlmv2:
                          description: NTLM when set to true will do authentication
                            using NTLM v2 protocol
                          type: boolean
                        password:
                          properties:
                            name:
                              type: string
                            value:
                              type: string
                            valueFrom:
                              properties:
                                configMapKeyRef:
                                  properties:
                                    key:
                                      type: string
                                    name:
                                      type: string
                                  required:
                                  - key
                                  type: object
                                helmRef:
                                  properties:
                                    key:
                                      description: Key is a JSONPath expression used
                                        to fetch the key from the merged JSON.
                                      type: string
                                    name:
                                      type: string
                                  required:
                                  - key
                                  type: object
                                secretKeyRef:
                                  properties:
                                    key:
                                      type: string
                                    name:
                                      type: string
                                  required:
                                  - key
                                  type: object
                                serviceAccount:
                                  description: ServiceAccount specifies the service
                                    account whose token should be fetched
                                  type: string
                              type: object
                          type: object
                        templateBody:
                          description: TemplateBody controls whether the body of the
                            request needs to be templated
                          type: boolean
                        url:
                          description: Connection url, interpolated with username,password
                          type: string
                        username:
                          properties:
                            name:
                              type: string
                            value:
                              type: string
                            valueFrom:
                              properties:
                                configMapKeyRef:
                                  properties:
                                    key:
                                      type: string
                                    name:
                                      type: string
                                  required:
                                  - key
                                  type: object
                                helmRef:
                                  properties:
                                    key:
                                      description: Key is a JSONPath expression used
                                        to fetch the key from the merged JSON.
                                      type: string
                                    name:
                                      type: string
                                  required:
                                  - key
                                  type: object
                                secretKeyRef:
                                  properties:
                                    key:
                                      type: string
                                    name:
                                      type: string
                                  required:
                                  - key
                                  type: object
                                serviceAccount:
                                  description: ServiceAccount specifies the service
                                    account whose token should be fetched
                                  type: string
                              type: object
                          type: object
                      type: object
                    if:
                      description: 'Filter is a cel-expression that decides if this
                        action should run or not. The expressions should either return
                        a boolean value (''true'' indicating run the action & vice
                        versa) or any of these special functions. Examples: - filter:
                        config.deleted_at ? true: false - filter: always() always():
                        run no matter what; even if the playbook is cancelled/fails
                        failure(): run if any of the previous actions failed success():
                        run only if all previous actions succeeded (default) timeout():
                        run only if any of the previous actions timed out skip():
                        skip running this action'
                      type: string
                    name:
                      description: Name of the action
                      type: string
                    notification:
                      properties:
                        connection:
                          description: Connection to use to send the notification
                          type: string
                        message:
                          description: Message is the body of the notification
                          type: string
                        properties:
                          additionalProperties:
                            type: string
                          description: Properties for shoutrrr
                          type: object
                        title:
                          description: Title of the notification
                          type: string
                        url:
                          description: URL for the shoutrrr connection string
                          type: string
                      required:
                      - message
                      - title
                      type: object
                    pod:
                      properties:
                        artifacts:
                          description: Artifacts to save
                          items:
                            properties:
                              path:
                                type: string
                            required:
                            - path
                            type: object
                          type: array
                        maxLength:
                          description: 'MaxLength is the maximum length of the logs
                            to show Default: 3000 characters'
                          type: integer
                        name:
                          description: Name is name of the pod that'll be created
                          type: string
                        spec:
                          description: Spec is the container spec
                          type: object
                          x-kubernetes-preserve-unknown-fields: true
                      required:
                      - name
                      - spec
                      type: object
                    runsOn:
                      description: RunsOn specifies the agents that can run this action.
                        When left empty, the action will run on the main instance
                        itself.
                      items:
                        type: string
                      type: array
                    sql:
                      properties:
                        connection:
                          description: Connection identifier e.g. connection://Postgres/flanksource
                          type: string
                        driver:
                          description: 'Driver is the name of the underlying database
                            to connect to. Example: postgres, mysql, ...'
                          type: string
                        query:
                          description: Query is the sql query to run
                          type: string
                        url:
                          description: URL is the database connection url
                          type: string
                      required:
                      - driver
                      - query
                      type: object
                    templatesOn:
                      description: 'TemplatesOn specifies where the templating happens.
                        Available options: - host - agent When left empty, the templating
                        is done on the main instance(host) itself.'
                      type: string
                    timeout:
                      description: Timeout is the maximum duration to let an action
                        run before it's cancelled.
                      type: string
                  required:
                  - name
                  type: object
                type: array
              approval:
                description: Approval defines the individuals and teams authorized
                  to approve runs of this playbook.
                properties:
                  approvers:
                    properties:
                      people:
                        description: Emails of the approvers
                        items:
                          type: string
                        type: array
                      teams:
                        description: Names of the teams
                        items:
                          type: string
                        type: array
                    type: object
                  type:
                    type: string
                type: object
              checks:
                description: Checks filters what checks can run on this playbook.
                items:
                  description: PlaybookResourceFilter defines a filter that decides
                    whether a resource (config or a component) is permitted be run
                    on the Playbook.
                  properties:
                    tags:
                      additionalProperties:
                        type: string
                      type: object
                    type:
                      type: string
                  type: object
                type: array
              components:
                description: Components what components can run on this playbook.
                items:
                  description: PlaybookResourceFilter defines a filter that decides
                    whether a resource (config or a component) is permitted be run
                    on the Playbook.
                  properties:
                    tags:
                      additionalProperties:
                        type: string
                      type: object
                    type:
                      type: string
                  type: object
                type: array
              configs:
                description: Configs filters what config items can run on this playbook.
                items:
                  description: PlaybookResourceFilter defines a filter that decides
                    whether a resource (config or a component) is permitted be run
                    on the Playbook.
                  properties:
                    tags:
                      additionalProperties:
                        type: string
                      type: object
                    type:
                      type: string
                  type: object
                type: array
              description:
                description: Short description of the playbook.
                type: string
              icon:
                type: string
              "on":
                description: '`On` defines triggers that will automatically trigger
                  the playbook. If multiple events are defined, only one of those
                  events needs to occur to trigger the playbook. If multiple triggering
                  events occur at the same time, multiple playbook runs will be triggered.'
                properties:
                  canary:
                    items:
                      properties:
                        event:
                          description: Event to listen for.
                          type: string
                        filter:
                          description: CEL expression for additional event filtering.
                          type: string
                        labels:
                          additionalProperties:
                            type: string
                          description: Labels specifies the key-value pairs that the
                            associated event's resource must match.
                          type: object
                      required:
                      - event
                      type: object
                    type: array
                  component:
                    items:
                      properties:
                        event:
                          description: Event to listen for.
                          type: string
                        filter:
                          description: CEL expression for additional event filtering.
                          type: string
                        labels:
                          additionalProperties:
                            type: string
                          description: Labels specifies the key-value pairs that the
                            associated event's resource must match.
                          type: object
                      required:
                      - event
                      type: object
                    type: array
                  config:
                    items:
                      properties:
                        event:
                          description: Event to listen for.
                          type: string
                        filter:
                          description: CEL expression for additional event filtering.
                          type: string
                        labels:
                          additionalProperties:
                            type: string
                          description: Labels specifies the key-value pairs that the
                            associated event's resource must match.
                          type: object
                      required:
                      - event
                      type: object
                    type: array
                  webhook:
                    description: Webhook creates a new endpoint that triggers this
                      playbook
                    properties:
                      authentication:
                        properties:
                          basic:
                            properties:
                              password:
                                properties:
                                  name:
                                    type: string
                                  value:
                                    type: string
                                  valueFrom:
                                    properties:
                                      configMapKeyRef:
                                        properties:
                                          key:
                                            type: string
                                          name:
                                            type: string
                                        required:
                                        - key
                                        type: object
                                      helmRef:
                                        properties:
                                          key:
                                            description: Key is a JSONPath expression
                                              used to fetch the key from the merged
                                              JSON.
                                            type: string
                                          name:
                                            type: string
                                        required:
                                        - key
                                        type: object
                                      secretKeyRef:
                                        properties:
                                          key:
                                            type: string
                                          name:
                                            type: string
                                        required:
                                        - key
                                        type: object
                                      serviceAccount:
                                        description: ServiceAccount specifies the
                                          service account whose token should be fetched
                                        type: string
                                    type: object
                                type: object
                              username:
                                properties:
                                  name:
                                    type: string
                                  value:
                                    type: string
                                  valueFrom:
                                    properties:
                                      configMapKeyRef:
                                        properties:
                                          key:
                                            type: string
                                          name:
                                            type: string
                                        required:
                                        - key
                                        type: object
                                      helmRef:
                                        properties:
                                          key:
                                            description: Key is a JSONPath expression
                                              used to fetch the key from the merged
                                              JSON.
                                            type: string
                                          name:
                                            type: string
                                        required:
                                        - key
                                        type: object
                                      secretKeyRef:
                                        properties:
                                          key:
                                            type: string
                                          name:
                                            type: string
                                        required:
                                        - key
                                        type: object
                                      serviceAccount:
                                        description: ServiceAccount specifies the
                                          service account whose token should be fetched
                                        type: string
                                    type: object
                                type: object
                            required:
                            - password
                            - username
                            type: object
                          github:
                            properties:
                              token:
                                description: 'Token is the secret token for the webhook.
                                  Doc: https://docs.github.com/en/webhooks/using-webhooks/validating-webhook-deliveries'
                                properties:
                                  name:
                                    type: string
                                  value:
                                    type: string
                                  valueFrom:
                                    properties:
                                      configMapKeyRef:
                                        properties:
                                          key:
                                            type: string
                                          name:
                                            type: string
                                        required:
                                        - key
                                        type: object
                                      helmRef:
                                        properties:
                                          key:
                                            description: Key is a JSONPath expression
                                              used to fetch the key from the merged
                                              JSON.
                                            type: string
                                          name:
                                            type: string
                                        required:
                                        - key
                                        type: object
                                      secretKeyRef:
                                        properties:
                                          key:
                                            type: string
                                          name:
                                            type: string
                                        required:
                                        - key
                                        type: object
                                      serviceAccount:
                                        description: ServiceAccount specifies the
                                          service account whose token should be fetched
                                        type: string
                                    type: object
                                type: object
                            required:
                            - token
                            type: object
                          jwt:
                            properties:
                              jwksUri:
                                type: string
                            required:
                            - jwksUri
                            type: object
                          svix:
                            properties:
                              secret:
                                description: Secret is the webhook signing secret
                                properties:
                                  name:
                                    type: string
                                  value:
                                    type: string
                                  valueFrom:
                                    properties:
                                      configMapKeyRef:
                                        properties:
                                          key:
                                            type: string
                                          name:
                                            type: string
                                        required:
                                        - key
                                        type: object
                                      helmRef:
                                        properties:
                                          key:
                                            description: Key is a JSONPath expression
                                              used to fetch the key from the merged
                                              JSON.
                                            type: string
                                          name:
                                            type: string
                                        required:
                                        - key
                                        type: object
                                      secretKeyRef:
                                        properties:
                                          key:
                                            type: string
                                          name:
                                            type: string
                                        required:
                                        - key
                                        type: object
                                      serviceAccount:
                                        description: ServiceAccount specifies the
                                          service account whose token should be fetched
                                        type: string
                                    type: object
                                type: object
                              verifyTimestamp:
                                description: TimestampTolerance specifies the tolerance
                                  for the timestamp verification. Valid time units
                                  are "ns", "us" (or "s"), "ms", "s", "m", "h", "d",
                                  "w", "y".
                                type: string
                            required:
                            - secret
                            type: object
                        type: object
                      path:
                        type: string
                    required:
                    - path
                    type: object
                type: object
              parameters:
                description: Define and document what parameters are required to run
                  this playbook.
                items:
                  description: PlaybookParameter defines a parameter that a playbook
                    needs to run.
                  properties:
                    default:
                      description: Specify the default value of the parameter. It
                        is templatable.
                      type: string
                    description:
                      type: string
                    icon:
                      type: string
                    label:
                      description: Label shown on the UI
                      type: string
                    name:
                      description: Name is the key for this parameter. It's used to
                        address the parameter on templates.
                      type: string
                    properties:
                      type: object
                      x-kubernetes-preserve-unknown-fields: true
                    required:
                      type: boolean
                    type:
                      enum:
                      - check
                      - checkbox
                      - code
                      - component
                      - config
                      - list
                      - people
                      - team
                      - text
                      type: string
                  required:
                  - label
                  - name
                  type: object
                type: array
              permissions:
                description: Permissions ...
                items:
                  properties:
                    ref:
                      type: string
                    role:
                      type: string
                    team:
                      type: string
                  type: object
                type: array
              runsOn:
                description: RunsOn specifies the agents that can run this playbook.
                  When left empty, the playbook will run on the main instance itself.
                items:
                  type: string
                type: array
              templatesOn:
                description: 'TemplatesOn specifies where the templating happens.
                  Available options: - host - agent When left empty, the templating
                  is done on the main instance(host) itself.'
                type: string
            required:
            - actions
            type: object
          status:
            description: PlaybookStatus defines the observed state of Playbook
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
